<!DOCTYPE html>
<html
        lang="en"
        class="light-style layout-menu-fixed"
        dir="ltr"
        data-theme="theme-default"
        data-assets-path="/static/admin/assets/"
        data-template="vertical-menu-template-free"
        xmlns:th="http://www.thymeleaf.org"
>

<head th:replace="_layout/admin/link/head"></head>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <!-- Menu -->

        <div th:replace="_layout/admin/menu"></div>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
            <!-- Navbar -->

            <nav
                    class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
                    id="layout-navbar"
            >
                <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
                    <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                        <i class="bx bx-menu bx-sm"></i>
                    </a>
                </div>

                <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                    <!-- Search -->
                    <div class="navbar-nav align-items-center">
                        <div class="nav-item d-flex align-items-center">
                            <i class="bx bx-search fs-4 lh-0"></i>
                            <input
                                    type="text"
                                    class="form-control border-0 shadow-none"
                                    placeholder="Tìm kiếm..."
                                    aria-label="Tìm kiếm..."
                                    oninput="handleSearchInputChange()"
                                    id="search-box-input"
                            />
                        </div>
                    </div>
                    <!-- /Search -->

                    <ul class="navbar-nav flex-row align-items-center ms-auto">
                        <!-- User -->
                        <li th:with="user_image='https://cdn-icons-png.flaticon.com/512/149/149071.png'"

                            class="nav-item navbar-dropdown dropdown-user dropdown">
                            <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                                <div class="avatar avatar-online">
                                    <img th:src="${user_image}" alt class="w-px-40 h-auto rounded-circle" />
                                </div>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <a class="dropdown-item" href="#">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 me-3">
                                                <div class="avatar avatar-online">
                                                    <img th:src="${user_image}" alt class="w-px-40 h-auto rounded-circle" />
                                                </div>
                                            </div>
                                            <div class="flex-grow-1">
                                                <span class="fw-semibold d-block">User 1</span>
                                                <small class="text-muted">Admin Role</small>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <div class="dropdown-divider"></div>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">
                                        <i class="bx bx-user me-2"></i>
                                        <span class="align-middle">Thông Tin</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">
                                        <i class="bx bx-cog me-2"></i>
                                        <span class="align-middle">Cài Đặt</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">
                        <span class="d-flex align-items-center align-middle">
                          <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                          <span class="flex-grow-1 align-middle">Hoá Đơn</span>
                          <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">4</span>
                        </span>
                                    </a>
                                </li>
                                <li>
                                    <div class="dropdown-divider"></div>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="auth-login-basic.html">
                                        <i class="bx bx-power-off me-2"></i>
                                        <span class="align-middle">Đăng Xuất</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <!--/ User -->
                    </ul>
                </div>
            </nav>

            <!-- / Navbar -->

            <!-- Content wrapper -->
            <div class="content-wrapper">
                <div class="container-xxl flex-grow-1 container-p-y">
                    <h4 class="fw-bold py-3 mb-4">
                        <span class="text-muted fw-light">Products /</span> Category
                    </h4>
                    <div class="row">
                        <!-- Vertical Scrollbar -->
                        <div class="col-md-4 col-sm-12">
                            <div class="card overflow-visible mb-4" style="height: fit-content">
                                <h5 class="card-header">Danh mục</h5>
                                <div class="col-auto card-body">
                                    <div class="btn-group" >
                                        <a data-bs-toggle="modal" data-bs-target="#modalAddCategory" class="btn btn-primary text-white">Thêm danh mục</a>
                                        <a data-bs-toggle="modal" data-bs-target="#modalAddCategoryCsv" class="btn btn-outline-gray">Thêm từ csv</a>
                                    </div>
                                </div>
                                <div class="modal fade" id="modalAddCategory" tabindex="-1" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="modalAddCategoryTitle">Thêm Danh mục</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <form method="post" th:object="${newCategory}" th:action="@{/admin/category/new}">
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label for="name" class="form-label">Tên danh mục</label>
                                                            <input type="text" id="modalAddCategoryName" th:name="name"  required class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label for="href" class="form-label">Duong dan</label>
                                                            <input type="text" id="modalAddCategoryHref" th:name="href" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label for="name" class="form-label">Từ khoá</label>
                                                            <input type="text" id="modalAddCategoryKeywords" th:name="keywords"  class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label for="available" class="form-label">Tình trạng</label>
                                                            <input type="checkbox" id="modalAddCategoryavailable" th:name="available"  class="form-check-input">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                                        Huỷ
                                                    </button>
                                                    <button type="submit" class="btn btn-primary">Lưu</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal fade" id="modalAddCategoryCsv" tabindex="-1" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title">Thêm Danh mục</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="mb-3">
                                                    <label for="formFileCsv" class="form-label">Tải lên file csv</label>
                                                    <input class="form-control" type="file" id="formFileCsv" accept=".xlsx, .xls">
                                                </div>
                                                <div class="mb-3" id="table-csv-display">

                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body" id="vertical-example">
                                        <div class="demo-inline-spacing">
                                            <div class="list-group">
                                                <div class="row mb-3" th:each="category, status : ${categories}" th:if="${category.parentId == null}">
                                                    <div class="col">
                                                        <button th:id="'btn-'+${category.id}" onclick="toggleActiveClass1(this)" th:attr="onclick='replaceParentCategory(\'' + ${category.id} + '\', \'' + ${category.name} + '\')'" class="btn btn-outline-gray text-black btn-root-category" >
                                                            <!-- Display the category name -->
                                                            <span th:text="${category.name}"></span>
                                                        </button>

                                                    </div>
                                                    <div class="col col-auto float-right">
                                                        <a data-bs-toggle="modal" th:data-bs-target="'#modalCenter'+ ${category.id}" class="btn btn-outline-secondary">
                                                            <i class="tf-icons bx bx-edit"></i>
                                                        </a>
                                                        <div class="modal fade" th:id="'modalCenter' + ${category.id}" tabindex="-1" style="display: none;" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title" id="modalCenterTitle">Chỉnh sửa Danh mục</h5>
                                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    </div>
                                                                    <form th:action="'/admin/products/category/?id='+${category.id}" th:object="${category}" method="post">
                                                                        <div class="modal-body">
                                                                            <input hidden="hidden" type="text" id="id" name="id" class="form-control" th:value="${category.id}">
                                                                            <div class="row">
                                                                                <div class="col mb-3">
                                                                                    <label for="name" class="form-label">Tên danh mục</label>
                                                                                    <input type="text" id="name" name="name" class="form-control" th:value="${category.name}">
                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col mb-3">
                                                                                    <label for="href" class="form-label">Đường dẫn</label>
                                                                                    <input type="text" id="href" name="href" class="form-control" th:value="${category.href}">
                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col mb-3">
                                                                                    <label for="available" class="form-label">Tình trạng</label>
                                                                                    <input type="checkbox" id="available" name="available" class="form-check-input" th:checked="${category.available}">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                                                                Huỷ
                                                                            </button>
                                                                            <button type="submit" class="btn btn-primary">Lưu</button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <a th:href="@{/admin/category/delete/{id}(id=${category.id})}" class="btn btn-outline-secondary">
                                                            <i class="tf-icons bx bx-trash"></i>
                                                        </a>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                </div>
                            </div>
                        </div>
                        <!--/ Vertical Scrollbar -->
                        <!-- Vertical Scrollbar -->
                        <div class="col-md-4 col-sm-12">
                            <div class="card rounded overflow-scroll overflow-hidden mb-4" style="max-height: 100vh">
                                <h5 class="card-header">Nhóm loại</h5>
                                <div class="col-auto card-body">
                                    <div class="btn-group" >
                                        <a data-bs-toggle="modal" data-bs-target="#modalAddCategory2" class="btn btn-primary text-white">Thêm nhóm loại</a>
                                    </div>
                                </div>
                                <div class="modal fade" id="modalAddCategory2" tabindex="-1" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="modalAddCategoryTitle2">Thêm nhóm loại</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <form method="post" th:object="${newCategory}" th:action="@{/admin/category/new}">
                                                <div class="modal-body">
                                                    <div class="row">
                                                            <input type="text" hidden="hidden" id="modalAddCategoryParentId2" th:name="parentId" required class="form-control">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Tên danh mục</label>
                                                            <input type="text" disabled id="modalAddCategoryParentName2" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Tên nhóm loại</label>
                                                            <input type="text" id="modalAddCategoryName2" th:name="name"  required class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Từ khoá</label>
                                                            <input type="text" id="modalAddCategoryKeywords2" th:name="keywords"  class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Tình trạng</label>
                                                            <input type="checkbox" id="modalAddCategoryavailable2" th:name="available" checked class="form-check-input">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                                        Huỷ
                                                    </button>
                                                    <button type="submit" class="btn btn-primary">Lưu</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body" id="vertical-example2">
                                    <div class="demo-inline-spacing">
                                        <div class="list-group" id="list-group-parent">

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--/ Vertical Scrollbar -->
                        <!-- Vertical Scrollbar -->
                        <div class="col-md-4 col-sm-12">
                            <div class="card overflow-scroll mb-4" style="max-height: 100vh">
                                <h5 class="card-header">Loại</h5>
                                <div class="col-auto card-body">
                                    <div class="btn-group" >
                                        <a data-bs-toggle="modal" data-bs-target="#modalAddCategory3" class="btn btn-primary text-white">Thêm loại</a>
                                    </div>
                                </div>
                                <div class="modal fade" id="modalAddCategory3" tabindex="-1" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="modalAddCategoryTitle3">Thêm loại</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <form method="post" th:object="${newCategory}" th:action="@{/admin/category/new}">
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <input type="text" hidden="hidden" id="modalAddCategoryParentId3" th:name="parentId" required class="form-control">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Tên Nhóm loại</label>
                                                            <input type="text" disabled id="modalAddCategoryParentName3" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Tên loại</label>
                                                            <input type="text" id="modalAddCategoryName3" th:name="name"  required class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Từ khoá</label>
                                                            <input type="text" id="modalAddCategoryKeywords3" th:name="keywords"  class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Tình trạng</label>
                                                            <input type="checkbox" id="modalAddCategoryavailable3" th:name="available" checked class="form-check-input">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                                        Huỷ
                                                    </button>
                                                    <button type="submit" class="btn btn-primary">Lưu</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body" id="vertical-example3">
                                    <div class="demo-inline-spacing">
                                        <div class="list-group" id="list-group-category-product">


                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--/ Vertical Scrollbar -->
                    </div>
                    <div>
            </div>
            <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
</div>
<!-- / Layout wrapper -->
<div th:replace="_layout/admin/link/js"></div>
<!-- Page JS -->
        <script src="/static/admin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
        <script src="/static/admin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
        <script src="/static/admin/assets/js/extended-ui-perfect-scrollbar.js"></script>
        <script src="/static/admin/assets/js/ui-modals.js"></script>
        <script src="/static/admin/js/script_category.js"></script>
        <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
</body>
</html>
