<!DOCTYPE html>
<html
        lang="en"
        class="light-style layout-menu-fixed"
        dir="ltr"
        data-theme="theme-default"
        data-assets-path="/static/admin/assets/"
        data-template="vertical-menu-template-free"
        xmlns:th="http://www.thymeleaf.org">
>
<head th:replace="_layout/admin/link/head"></head>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <!-- Menu -->

        <div th:replace="_layout/admin/menu"></div>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
            <!-- Navbar -->

            <nav
                    class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
                    id="layout-navbar"
            >
                <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
                    <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                        <i class="bx bx-menu bx-sm"></i>
                    </a>
                </div>

                <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                    <!-- Search -->
                    <div class="navbar-nav align-items-center">
                        <div class="nav-item d-flex align-items-center">
                            <i class="bx bx-search fs-4 lh-0"></i>
                            <input
                                    type="text"
                                    class="form-control border-0 shadow-none"
                                    placeholder="Tìm kiếm..."
                                    aria-label="Tìm kiếm..."
                                    oninput="handleSearchInputChange()"
                                    id="search-box-input"
                            />
                        </div>
                    </div>
                    <!-- /Search -->

                    <ul class="navbar-nav flex-row align-items-center ms-auto">
                        <!-- User -->
                        <li th:with="user_image='https://cdn-icons-png.flaticon.com/512/149/149071.png'"

                            class="nav-item navbar-dropdown dropdown-user dropdown">
                            <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                                <div class="avatar avatar-online">
                                    <img th:src="${user_image}" alt class="w-px-40 h-auto rounded-circle" />
                                </div>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <a class="dropdown-item" href="#">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 me-3">
                                                <div class="avatar avatar-online">
                                                    <img th:src="${user_image}" alt class="w-px-40 h-auto rounded-circle" />
                                                </div>
                                            </div>
                                            <div class="flex-grow-1">
                                                <span class="fw-semibold d-block">User 1</span>
                                                <small class="text-muted">Admin Role</small>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <div class="dropdown-divider"></div>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">
                                        <i class="bx bx-user me-2"></i>
                                        <span class="align-middle">Thông Tin</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">
                                        <i class="bx bx-cog me-2"></i>
                                        <span class="align-middle">Cài Đặt</span>
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#">
                        <span class="d-flex align-items-center align-middle">
                          <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                          <span class="flex-grow-1 align-middle">Hoá Đơn</span>
                          <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">4</span>
                        </span>
                                    </a>
                                </li>
                                <li>
                                    <div class="dropdown-divider"></div>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="auth-login-basic.html">
                                        <i class="bx bx-power-off me-2"></i>
                                        <span class="align-middle">Đăng Xuất</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <!--/ User -->
                    </ul>
                </div>
            </nav>

            <!-- / Navbar -->

            <!-- Content wrapper -->
            <div class="content-wrapper">
                <div class="container-xxl flex-grow-1 container-p-y">
                    <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Products /</span> All Products</h4>
                    <div class="card">

                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-auto">
                                    <div class="btn-group" id="hover-dropdown-demo">
                                        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" data-trigger="hover">Nhập sản phẩm</button>
                                        <ul class="dropdown-menu">
                                            <li> <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#modalAddProduct">Nhập 1 sản phẩm</a> </li>
                                            <li> <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#modalAddProductCsv">Thêm từ csv</a> </li>

                                        </ul>
                                    </div>
                                </div>

                                <div class="modal fade" id="modalAddProductCsv" tabindex="-1" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title">Thêm sản phẩm</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="mb-3">
                                                    <label for="formFileCsv" class="form-label">Tải lên file csv</label>
                                                    <input class="form-control" type="file" id="formFileCsv" accept=".xlsx, .xls">
                                                </div>
                                                <div class="mb-3" id="table-csv-display">

                                                </div>
                                            </div>

                                            <div id="modal-footer-csv" class="modal-footer">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal fade" id="modalAddProduct" tabindex="-1" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="modalAddCategoryTitle3">Thêm sản phẩm</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <form id="form-new-product" >
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Tên sản phẩm</label>
                                                            <input type="text" name="name" required class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Giá sản phẩm</label>
                                                            <input type="number"  name="price" required min="0" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Mô tả</label>
                                                            <input type="text"  name="description"  required class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Ngày hết hạn</label>
                                                            <input type="date" name="outDate" required  class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Giảm giá</label>
                                                            <input type="number" name="discount"  min="0" max="100"  class="form-control">
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Số lượng</label>
                                                            <input type="number" name="quantity" required min="0" max="100" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <label class="form-label">Loại sản phẩm</label>
                                                        <div class="col mb-3">
                                                            <select id="select-option-root-category" required class="form-control mb-1">
                                                                <option value="" disabled selected>Danh mục</option>
                                                                <option th:each="category : ${root_category}" th:value="${category.id}" th:text="${category.name}"></option>
                                                            </select>
                                                        </div>
                                                        <div class="col mb-3">
                                                            <select id="select-option-parent-category" required class="form-control mb-1">
                                                                <option value="" disabled selected>Nhóm loại</option>
                                                                <!-- Add additional options as needed -->

                                                            </select>
                                                        </div>
                                                        <div class="col mb-3">
                                                            <select id="select-option-product-category" name="categoryId" required class="form-control mb-1">
                                                                <option value="" disabled selected>Loại sản phẩm</option>
                                                            </select>
                                                        </div>


                                                    </div>
                                                    <div class="row">
                                                        <div class="col mb-3">
                                                            <label class="form-label">Ảnh sản phẩm</label>
                                                            <input id="upload-images-product" type="file" name="descriptionImages" accept="image/*" multiple class="form-control">
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                                        Huỷ
                                                    </button>
                                                    <button class="btn btn-primary">Lưu</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                            </div>


                            <div class="table-responsive text-nowrap">
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>Tên sản phẩm</th>
                                        <th>Hình ảnh</th>
                                        <th>Giá</th>
                                        <th>Giảm giá</th>
                                        <th>Tồn kho</th>
                                        <th>Tình trạng</th>
                                        <th>Thao tác</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="product : ${list_products}">
                                        <td th:text="${product.name}"></td>
                                        <td>
                                            <div style="width: 200px !important;"
                                                 th:id="${'carousel-'+product.id}"
                                                 class="carousel slide col-md-8 offset-md-2"
                                                 data-bs-ride="carousel">
                                                <div class="carousel-inner">
                                                    <div th:each="image, status : ${product.descriptionImages}" th:classappend="${status.first ? 'active' : ''}" class="carousel-item">
                                                        <img th:src="${image.toString()}" class="d-block w-100" />
                                                    </div>
                                                </div>
                                                <a class="carousel-control-prev" th:href="${'#carousel-'+product.id}" role="button" data-bs-slide="prev">
                                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                    <span class="visually-hidden">Previous</span>
                                                </a>
                                                <a class="carousel-control-next" th:href="${'#carousel-'+product.id}" role="button" data-bs-slide="next">
                                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                    <span class="visually-hidden">Next</span>
                                                </a>
                                            </div>
                                        </td>
                                        <td th:text="${product.price + 'đ'}"></td>
                                        <td th:text="${product.discount + '%'}"></td>
                                        <td><span class="badge me-1" th:classappend="${product.quantity < 10 ? 'bg-label-warning':'bg-label-primary'}" th:text="${product.quantity}"></span></td>
                                        <td>
                                            <span class="badge me-1" th:classappend="${product.available ? 'bg-label-success' : 'bg-label-danger'}" th:text="${product.available ? 'Active':'Disable'}"></span>
                                        </td>
                                        <td>
                                            <div class="dropdown">
                                                <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                                                    <i class="bx bx-dots-vertical-rounded"></i>
                                                </button>
                                                <div class="dropdown-menu">
                                                    <a class="dropdown-item" href="javascript:void(0);"
                                                    ><i class="bx bx-edit-alt me-1"></i> Chỉnh sửa</a
                                                    >
                                                    <a class="dropdown-item" th:href="'/admin/products/delete?id='+${product.id}"
                                                    ><i class="bx bx-trash me-1"></i> Xoá</a
                                                    >
                                                </div>
                                            </div>
                                        </td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                            <!--Paging Products-->
                            <div class="demo-inline-spacing">
                                <nav aria-label="Page navigation">
                                    <ul class="pagination justify-content-center">
                                        <li class="page-item prev">
                                            <a class="page-link" href="javascript:void(0);"
                                            ><i class="tf-icon bx bx-chevrons-left"></i
                                            ></a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="javascript:void(0);">1</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="javascript:void(0);">2</a>
                                        </li>
                                        <li class="page-item active">
                                            <a class="page-link" href="javascript:void(0);">3</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="javascript:void(0);">4</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="javascript:void(0);">5</a>
                                        </li>
                                        <li class="page-item next">
                                            <a class="page-link" href="javascript:void(0);"
                                            ><i class="tf-icon bx bx-chevrons-right"></i
                                            ></a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>

                        </div>
                    </div>
                    <div>
            </div>
            <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
</div>
<!-- / Layout wrapper -->
<div th:replace="_layout/admin/link/js"></div>
<!-- Page JS -->
        <script src="/static/admin/assets/js/dashboards-analytics.js"></script>
        <script src="/static/admin/js/script_products.js"></script>
        <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>
